<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yundagalaxy.management.mapper.SoaEmpMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="soaEmpResultMap" type="com.yundagalaxy.management.entity.SoaEmp">
        <id column="cp_code" property="cpCode"/>
        <result column="soa_code" property="soaCode"/>
        <result column="sex" property="sex"/>
        <result column="telephone" property="telephone"/>
        <result column="phone" property="phone"/>
        <result column="name" property="name"/>
        <result column="id_card" property="idCard"/>
        <result column="status" property="status"/>
        <result column="job" property="job"/>
        <result column="join_status" property="joinStatus"/>
        <result column="create_time" property="createTime"/>
        <result column="last_update" property="lastUpdate"/>
    </resultMap>


    <select id="selectSoaEmpPage" resultType="com.yundagalaxy.management.vo.SoaEmpVO">
        select *
        from
        pc_soa_emp
        <where>
            <if test="rq!=null and rq.name != null and rq.name!=''">
                and `name`= #{rq.name,jdbcType=VARCHAR}
            </if>
            <if test="rq!=null and rq.cpCode != null">
                and `cp_code`= #{rq.cpCode,jdbcType=NUMERIC}
            </if>
            <if test="rq!=null and rq.soaCode != null and rq.soaCode!=''">
                and `soa_code`= #{rq.soaCode,jdbcType=VARCHAR}
            </if>
            <if test="rq!=null and rq.joinStatus != null">
                and `join_status`= #{rq.joinStatus,jdbcType=NUMERIC}
            </if>
        </where>
    </select>

    <delete id="deleteSoaInfo">
        DELETE FROM pc_soa_emp WHERE soa_code= #{soaCode}
    </delete>

    <update id="updateJoinStatus">
        UPDATE pc_soa_emp
        SET join_status = #{status}
        WHERE soa_code = #{soaCode}
    </update>

</mapper>
